(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(n){if(n.ep)return;n.ep=!0;const c=o(n);fetch(n.href,c)}})();const d=document.querySelector("[data-project-container]"),E=document.querySelector("[data-new-project-form]"),m=document.querySelector("[data-new-project-input]"),L=document.querySelector("[data-delete-project-button]"),f=document.querySelector("[data-task-display-container]"),C=document.querySelector("[data-task-title]"),v=document.querySelector("[data-task-count]"),u=document.querySelector("[data-tasks]"),P=document.querySelector("#task-template"),q=document.querySelector("[data-new-task-form]"),p=document.querySelector("[data-new-task-input]"),T=document.querySelector("[data-clear-completed-button]"),y="task.projects",g="task.selectedProjectId";let a=JSON.parse(localStorage.getItem(y))||[],s=localStorage.getItem(g);d.addEventListener("click",t=>{t.target.tagName.toLowerCase()==="li"&&(s=t.target.dataset.projectId,l())});u.addEventListener("click",t=>{if(t.target.tagName.toLowerCase()==="input"){const e=a.find(r=>r.id===s),o=e.tasks.find(r=>r.id===t.target.id);o.complete=t.target.checked,S(),h(e)}});T.addEventListener("click",t=>{const e=a.find(o=>o.id===s);e.tasks=e.tasks.filter(o=>!o.complete),l()});L.addEventListener("click",t=>{a=a.filter(e=>e.id!==s),s=null,l()});E.addEventListener("submit",t=>{t.preventDefault();const e=m.value;if(e==null||e==="")return;const o=O(e);m.value=null,a.push(o),l()});q.addEventListener("submit",t=>{t.preventDefault();const e=p.value;if(e==null||e==="")return;const o=w(e);p.value=null,a.find(n=>n.id===s).tasks.push(o),l()});function O(t){return{id:Date.now().toString(),name:t,tasks:[]}}function w(t){return{id:Date.now().toString(),name:t,complete:!1}}function l(){S(),j()}function S(){localStorage.setItem(y,JSON.stringify(a)),localStorage.setItem(g,s)}function j(){k(d),b();const t=a.find(e=>e.id===s);s==null?f.style.display="none":(f.style.display="",C.innerText=t.name,h(t),k(u),I(t))}function I(t){t.tasks.forEach(e=>{const o=document.importNode(P.content,!0),r=o.querySelector("input");r.id=e.id,r.checked=e.complete;const n=o.querySelector("label");n.htmlFor=e.id,n.append(e.name),u.appendChild(o)})}function h(t){const e=t.tasks.filter(r=>!r.complete).length,o=e===1?"task":"tasks";v.innerText=`${e} ${o} remaining`}function b(){a.forEach(t=>{const e=document.createElement("li");e.dataset.projectId=t.id,e.classList.add("project-name"),e.innerText=t.name,t.id===s&&e.classList.add("active-project"),d.appendChild(e)})}function k(t){for(;t.firstChild;)t.removeChild(t.firstChild)}j();
